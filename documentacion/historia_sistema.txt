02/12/2025
    Ya tanto en mi ambiente local en mi pc como en el servidor vesta del colegio está instalado el proyecto Cakephp 5.2 y está funcionando.
    En el servidor Vesta quedaron los warning:
        You should set zend.assertions to 1 in your php.ini for your development environment.

        There are configuration problems present which need to be fixed:
        Try adding your current top level domain to the DebugKit.safeTld config and reload.
        You need to install the PHP extension pdo_sqlite so DebugKit can work properly.
    El primer Warning se corrigió cambiando en php.ini zend.assertions a 1, pero luego se volvió a cambiar a -1, porque realmente el servidor vesta será el ambiente de producción, no de desarrollo 
    También se ignorará el segundo warning, por el mismo motivo de que este será un servidor de producción y además se intentó instalar pdo_sqlite en el servidor y no se pudo porque el sistema operativo del servidor Debian 10 no encuentra el repositorio de pdo_sqlite. 
    
    Así que esos dos warnings se ignorarán y se continúa con la migración.

    También recordar que en el proyecto Carpeta personal/sistemas/sistemasangabriel_51 está el archivo que se creó para el manejo de las imágenes y su implementación en el archivo modelo:
        src/Model/Behavior/UploadBehavior.php
        Migración del modelo User
            Instalar la librería:
            sudo chown -R ang3l:www-data /home/angeltest/web/dev.colegiosangabrielarcangel.com/public_html
            sudo find /home/angeltest/web/dev.colegiosangabrielarcangel.com/public_html -type d -exec chmod 775 {} +
            sudo find /home/angeltest/web/dev.colegiosangabrielarcangel.com/public_html -type f -exec chmod 664 {} +
            La otra opción es agregar al usuario ang3l al grupo www-data
            composer27 require intervention/image
            /opt/lampp/htdocs/sistemasangabriel/config/routes.php - Listo
            /opt/lampp/htdocs/sistemasangabriel/src/Model/Entity/User.php - Listo
            /opt/lampp/htdocs/sistemasangabriel/src/Model/Table/UsersTable.php - Listo  
            /opt/lampp/htdocs/sistemasangabriel/src/Model/Behavior/UploadBehavior.php - Listo 

        Gemini pero ya existe un grupo que se llama www-data, no podría añadir el usuario ang3l a ese grupo. Fíjate lo que dice mi terminal de la carpeta public_html: ang3l@servidor:/home/angeltest/web/dev.colegiosangabrielarcangel.com$ sudo ls -l

            total 28

            drwxr-x--x 2 angeltest angeltest 4096 ago 21  2021 cgi-bin

            drwxr-x--x 2 angeltest angeltest 4096 ago 21  2021 document_errors

            drwxr-xr-x 2 angeltest angeltest 4096 ago 16 12:40 logs

            drwxr-x--x 2 angeltest angeltest 4096 ago 21  2021 private

            drwxrwxr-x 2 angeltest www-data  4096 oct  8 10:40 public_html

            drwxr-x--x 2 angeltest angeltest 4096 ago 21  2021 public_shtml

            dr-xr-x--x 2 angeltest angeltest 4096 ago 21  2021 stats

            ang3l@servidor:/home/angeltest/web/dev.colegiosangabrielarcangel.com$ 



            ¡Tienes toda la razón y es una observación excelente! Es mucho más eficiente usar el grupo existente www-data, ya que VestaCP/Apache ya lo utiliza para servir los archivos web.

            Analizando la salida de tu terminal:

            Bash

            drwxrwxr-x 2 angeltest www-data 4096 oct 8 10:40 public_html
            Esto nos indica lo siguiente:

            Propietario (User): angeltest (rwx = Lectura, Escritura, Ejecución)

            Grupo (Group): www-data (rwx = Lectura, Escritura, Ejecución)

            Otros (Others): No tienen permisos (r-x = Lectura, Ejecución)

            Dado que el grupo www-data ya tiene permisos de escritura (w) en public_html, la solución es mucho más sencilla: solo necesitas añadir el usuario ang3l al grupo www-data.

            Aquí están los pasos simplificados:

            1. Añadir el Usuario al Grupo www-data
            Ejecuta el siguiente comando SSH como root o usando sudo:

            Bash

            sudo usermod -a -G www-data ang3l
            usermod: Comando para modificar cuentas de usuario.

            -a (append): Indica que se añada el usuario a un grupo sin sacarlo de los demás.

            -G (groups): Especifica el grupo al que se va a añadir.

            2. Aplicar los Cambios
            Para que el cambio en la membresía de grupo tenga efecto, el usuario ang3l debe cerrar su sesión SSH actual y volver a iniciarla.

            Bash

            exit
            # Luego, vuelve a iniciar sesión con SSH: ssh ang3l@servidor_ip
            3. Comprobación de Permisos (Opcional)
            Una vez que hayas vuelto a iniciar sesión como ang3l, ya deberías tener permisos de escritura. Puedes verificar tu pertenencia al grupo y la posibilidad de crear archivos:

            Verificar Grupos:

            Bash

            groups ang3l
            # Deberías ver 'www-data' en la lista.
            Probar Composer/Creación de Archivos:

            Navega a la carpeta e intenta crear un archivo o ejecutar composer:

            Bash

            cd /home/angeltest/web/dev.colegiosangabrielarcangel.com/public_html
            touch test_permisos.txt
            # Si no hay errores, ¡tienes permisos de escritura!
            rm test_permisos.txt
            Consideración Adicional: Archivos Nuevos
            El único detalle que podría surgir es que los archivos y carpetas que el usuario ang3l instale con Composer serán creados con ang3l como propietario. Esto está bien, pero si angeltest o el proceso web (PHP/Apache) necesita modificar esos archivos, podrían surgir problemas.

            Para mitigar esto, asegúrate de que cualquier archivo/carpeta nueva creada por ang3l herede permisos de escritura de grupo. Esto se logra en la práctica con un umask adecuado o, como solución rápida, ejecutando estos comandos después de un composer install:

            Bash

            # Cambia el grupo de los nuevos archivos a www-data
            sudo chgrp -R www-data public_html/vendor
            # Asegura que el grupo tenga permisos de escritura
            sudo chmod -R g+w public_html/vendor
            Sin embargo, para las pruebas iniciales y para usar Composer, el Paso 1 es suficiente. ¡Excelente trabajo al identificar el grupo www-data ya existente!
